---
import Layout from '../../layouts/Layout.astro';
import fs from 'node:fs';
import path from 'node:path';

// ==========================================
// 1. Êï∞ÊçÆËØªÂèñ‰∏éË∑ØÂæÑÁîüÊàê
// ==========================================
const getJson = (filename) => {
  try {
      let filePath = path.join(process.cwd(), 'public', 'data', filename);
      if (!fs.existsSync(filePath)) filePath = path.join(process.cwd(), 'src', 'data', filename);
      if (fs.existsSync(filePath)) return JSON.parse(fs.readFileSync(filePath, 'utf-8'));
      return [];
  } catch (e) { return []; }
};

export async function getStaticPaths() {
  const getJson = (filename) => {
    try {
        let filePath = path.join(process.cwd(), 'public', 'data', filename);
        if (!fs.existsSync(filePath)) filePath = path.join(process.cwd(), 'src', 'data', filename);
        if (fs.existsSync(filePath)) return JSON.parse(fs.readFileSync(filePath, 'utf-8'));
        return [];
    } catch (e) { return []; }
  };

  const aiData = getJson('ai_tools.json');
  const macData = getJson('mac_tools.json');
  const selfData = getJson('selfhosted_tools.json');
  const winData = getJson('windows_tools.json');
  const apiData = getJson('publicapis_tools.json'); 
  
  const aiTools = aiData.map(t => ({ ...t, collection: 'ai' }));
  const macTools = macData.map(t => ({ ...t, collection: 'mac' }));
  const selfTools = selfData.map(t => ({ ...t, collection: 'selfhosted' }));
  const winTools = winData.map(t => ({ ...t, collection: 'windows' }));
  const apiTools = apiData.map(t => ({ ...t, collection: 'publicapis' })); 
  
  const all = [...aiTools, ...macTools, ...selfTools, ...winTools, ...apiTools];

  return all.map((tool) => ({
    params: { slug: tool.slug || tool.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') },
    props: { tool, allTools: all },
  }));
}

const { tool, allTools } = Astro.props;
const existingSlugs = new Set(allTools.map(t => t.slug || t.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '')));

// ==========================================
// üöÄ 2. Ê∑±Â∫¶ÂÆöÂà∂ SEO ÈÄªËæë
// ==========================================

const currentYear = new Date().getFullYear();
let pageTitle = "";
let pageDesc = "";

// ‰ª∑Ê†ºÊ∏ÖÊ¥ó
const pType = tool.pricing_type ? tool.pricing_type.toLowerCase() : '';
const isFullyFree = pType === 'free' || pType === 'open source' || pType === 'public';
const isFreemium = pType.includes('freemium');

// Á´ûÂìÅÊèêÂèñ
const firstCompetitor = (tool.alternatives && tool.alternatives.length > 0) 
    ? tool.alternatives[0] 
    : 'Popular Tools';

if (tool.collection === 'mac') {
    if (isFullyFree) {
        pageTitle = `Download ${tool.name} for Mac (Free): Best Alternative to ${firstCompetitor}`;
    } else if (isFreemium) {
        pageTitle = `Download ${tool.name} for Mac (Freemium): Features vs ${firstCompetitor}`;
    } else {
        pageTitle = `${tool.name} for Mac Review: Pricing, Features & Alternatives`;
    }
    pageDesc = `Looking for ${tool.name} for macOS? Read our ${currentYear} review. A ${pType} ${tool.category} tool optimized for Apple Silicon. Compare it with ${firstCompetitor}.`;

} else if (tool.collection === 'windows') {
    if (isFullyFree) {
        pageTitle = `Download ${tool.name} for PC (Free): Windows 10/11 Latest Version`;
    } else if (isFreemium) {
        pageTitle = `Download ${tool.name} for Windows: Free Trial, Pricing & Review`;
    } else {
        pageTitle = `${tool.name} for Windows Pricing: Is it Worth it? (${currentYear} Review)`;
    }
    pageDesc = `Download the latest version of ${tool.name} for Windows 10/11 (64-bit). Installation guide, feature breakdown, and comparison vs ${firstCompetitor}.`;

} else if (tool.collection === 'selfhosted') {
    pageTitle = `Deploy ${tool.name} (Self-Hosted): Docker Guide & ${firstCompetitor} Alternative`;
    pageDesc = `Self-host ${tool.name} on your server. ${currentYear} Guide: Docker Compose setup, system requirements, and why it's the best open-source alternative to ${firstCompetitor}.`;

} else if (tool.collection === 'publicapis') {
    const authType = tool.key_features?.[0] || 'Auth';
    pageTitle = `${tool.name} API Documentation: Endpoints, Auth & Integration (${currentYear})`;
    pageDesc = `Complete guide for ${tool.name} Public API. Check authentication (${authType}), rate limits, and JSON response examples. Ideal for developers building ${tool.category} apps.`;

} else {
    if (isFullyFree) {
        pageTitle = `${tool.name} (Free AI Tool): Features, Use Cases & Alternatives`;
    } else {
        pageTitle = `${tool.name} Pricing & Review: Is it Better than ${firstCompetitor}?`;
    }
    pageDesc = `In-depth review of ${tool.name}. Explore its ${tool.category} capabilities, pricing plans, and see how it stacks up against ${firstCompetitor} in ${currentYear}.`;
}

// ==========================================
// 3. UI ‰∏ªÈ¢òËâ≤ÈÖçÁΩÆ
// ==========================================
let themeColor = 'blue';
let bgLight = 'bg-blue-100';
let textDark = 'text-blue-700';
let bgBtn = 'bg-blue-600';
let hoverBtn = 'hover:bg-blue-700';
let shadowColor = 'shadow-blue-200';

if (tool.collection === 'mac') {
    themeColor = 'purple'; bgLight = 'bg-purple-100'; textDark = 'text-purple-700'; bgBtn = 'bg-purple-600'; hoverBtn = 'hover:bg-purple-700'; shadowColor = 'shadow-purple-200';
} else if (tool.collection === 'selfhosted') {
    themeColor = 'orange'; bgLight = 'bg-orange-100'; textDark = 'text-orange-700'; bgBtn = 'bg-orange-600'; hoverBtn = 'hover:bg-orange-700'; shadowColor = 'shadow-orange-200';
} else if (tool.collection === 'windows') {
    themeColor = 'sky'; bgLight = 'bg-sky-100'; textDark = 'text-sky-700'; bgBtn = 'bg-sky-600'; hoverBtn = 'hover:bg-sky-700'; shadowColor = 'shadow-sky-200';
} else if (tool.collection === 'publicapis') {
    themeColor = 'green'; bgLight = 'bg-green-100'; textDark = 'text-green-700'; bgBtn = 'bg-green-600'; hoverBtn = 'hover:bg-green-700'; shadowColor = 'shadow-green-200';
}

// ==========================================
// 4. Schema
// ==========================================
const softwareSchema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": tool.name,
  "applicationCategory": tool.category || "BusinessApplication",
  "operatingSystem": tool.collection === 'mac' ? "macOS" : (tool.collection === 'windows' ? "Windows" : "Web"),
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "aggregateRating": { "@type": "AggregateRating", "ratingValue": (4 + Math.random()).toFixed(1), "ratingCount": Math.floor(Math.random() * 100) + 10 },
  "description": tool.description
};

const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
    "@type": "ListItem",
    "position": 1,
    "name": "Home",
    "item": "https://toolstock.net/"
  },{
    "@type": "ListItem",
    "position": 2,
    "name": tool.collection.charAt(0).toUpperCase() + tool.collection.slice(1),
    "item": `https://toolstock.net/?tab=${tool.collection}`
  },{
    "@type": "ListItem",
    "position": 3,
    "name": tool.name
  }]
};

const faqSchema = tool.faqs && tool.faqs.length > 0 ? {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": tool.faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": { "@type": "Answer", "text": faq.answer }
  }))
} : null;

const relatedTools = allTools
    .filter(t => t.category === tool.category && t.name !== tool.name)
    .sort(() => 0.5 - Math.random())
    .slice(0, 3);
---

<Layout title={pageTitle} description={pageDesc} type="article">
  <script type="application/ld+json" set:html={JSON.stringify(softwareSchema)} />
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />
  {faqSchema && <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />}

  <nav class="text-sm text-slate-500 mb-6 flex items-center flex-wrap gap-2">
    <a href="/" class="hover:underline hover:text-blue-600">Home</a> 
    <span>/</span>
    <span class="capitalize">{tool.collection === 'publicapis' ? 'Public API' : (tool.collection === 'ai' ? 'AI Tools' : (tool.collection === 'mac' ? 'Mac Apps' : (tool.collection === 'windows' ? 'Windows' : 'Self-Hosted')))}</span>
    {tool.category && (
        <>
            <span>/</span>
            <a href={`/category/${tool.category.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '')}`} class="hover:underline hover:text-blue-600">{tool.category}</a>
        </>
    )}
    <span>/</span>
    <span class="text-slate-800 font-medium truncate max-w-[200px]">{tool.name}</span>
  </nav>

  <header class="mb-10 bg-white p-8 rounded-2xl shadow-sm border border-slate-100 text-center md:text-left">
    <div class="flex flex-col md:flex-row items-center justify-between gap-6">
        <div>
            <div class="flex items-center justify-center md:justify-start gap-3 mb-3">
                <h1 class="text-4xl font-extrabold text-slate-900">{tool.name}</h1>
                <span class={`px-2.5 py-0.5 ${bgLight} ${textDark} rounded-full text-xs font-bold uppercase tracking-wider`}>
                    {tool.collection === 'publicapis' ? 'API' : (tool.collection === 'ai' ? 'AI' : (tool.collection === 'mac' ? 'Mac' : (tool.collection === 'windows' ? 'Windows' : 'Self-Hosted')))}
                </span>
            </div>
            <p class="text-xl text-slate-600 max-w-2xl leading-relaxed">{tool.tagline}</p>
        </div>
        
        <a href={tool.website_url || `https://www.google.com/search?q=${encodeURIComponent(tool.name)}`} 
           target="_blank" 
           rel="nofollow noopener"
           onclick={`gtag('event', 'click_affiliate', { 'tool_name': '${tool.name}', 'url': '${tool.website_url || "google_search"}', 'category': '${tool.collection}' });`}
           class={`inline-flex items-center justify-center gap-2 px-8 py-3 rounded-lg font-bold text-white transition shadow-lg ${shadowColor} transform hover:-translate-y-0.5 active:translate-y-0 ${bgBtn} ${hoverBtn}`}>
           Visit Website 
           <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        </a>
    </div>
  </header>

  <div class="grid md:grid-cols-3 gap-8">
    <div class="md:col-span-2 space-y-12">
      <section>
        <h2 class="text-2xl font-bold mb-4 text-slate-800 border-b pb-2">Overview</h2>
        <div class="prose prose-slate max-w-none text-slate-700 leading-7">
            <p>{tool.description}</p>
        </div>
      </section>

      {/* Self-Hosted ‰ø°‰ªªÂ¢ûÂº∫Ê®°Âùó */}
      {tool.collection === 'selfhosted' && (
          <section>
            <h2 class="text-2xl font-bold mb-4 text-slate-800 border-b pb-2">Self-Hosting Resources</h2>
            <div class="flex flex-wrap gap-3 mb-6">
                <a href={`https://hub.docker.com/search?q=${encodeURIComponent(tool.name)}&type=image`} target="_blank" rel="nofollow" class="flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg text-sm font-bold hover:bg-blue-100 transition border border-blue-200">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.186v1.888c0 .102.083.185.185.185m-2.954-5.43h2.119a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.186.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V3.574a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.888c0 .102.083.186.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V3.574a.185.185 0 00-.186-.185H5.136a.186.186 0 00-.186.185v1.888c0 .102.084.186.186.186m5.893 2.715h2.119a.186.186 0 00.186-.185V6.29a.186.186 0 00-.186-.186h-2.119a.186.186 0 00-.185.186v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V6.29a.185.185 0 00-.185-.186H8.1a.185.185 0 00-.185.186v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.186.186 0 00.185-.185V6.29a.186.186 0 00-.186-.186H5.14a.186.186 0 00-.186.186v1.888c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V6.29a.185.185 0 00-.185-.186h-2.119a.185.185 0 00-.186.186v1.888c0 .102.082.185.186.185m-2.95 5.43h2.118a.185.185 0 00.186-.185V9.006a.185.185 0 00-.186-.186h-2.119a.185.185 0 00-.185.186v1.888c0 .102.082.185.185.185m5.88 0h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.186.186 0 00-.185.186v1.888c0 .102.083.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.185-.186H8.1a.185.185 0 00-.185.186v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.186.186 0 00.185-.185V9.006a.186.186 0 00-.186-.186H5.14a.186.186 0 00-.186.186v1.888c0 .102.084.185.186.185m5.83 5.704h2.118a.186.186 0 00.186-.186v-1.888a.186.186 0 00-.186-.185h-2.119a.186.186 0 00-.185.185v1.888c0 .102.082.186.185.186m-5.88 0h2.119a.186.186 0 00.185-.186v-1.888a.186.186 0 00-.186-.185H5.136a.186.186 0 00-.186.185v1.888c0 .102.084.186.186.186m2.96 0h2.12a.185.185 0 00.184-.186v-1.888a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.888c0 .102.083.186.185.186M23.34 9.448h-1.657v-2.07c0-.669-.54-1.213-1.205-1.213h-.914v-2.07c0-.669-.54-1.213-1.205-1.213H16.6v-1.27c0-.67-.54-1.214-1.205-1.214H1.246c-.665 0-1.205.544-1.205 1.214v15.934c0 .67.54 1.214 1.205 1.214h22.094c.665 0 1.205-.544 1.205-1.214v-6.098c0-.67-.54-1.214-1.205-1.214"/></svg>
                    Find Official Image on Docker Hub
                </a>
                <a href={tool.website_url} target="_blank" rel="nofollow" class="flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 rounded-lg text-sm font-bold hover:bg-slate-200 transition border border-slate-300">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    View Source & Docs
                </a>
            </div>
            <p class="text-slate-600 mb-2 text-sm">
              Below is a <strong>reference structure</strong> for <code>docker-compose.yml</code>. 
              <span class="text-red-600 font-bold ml-1">‚ö†Ô∏è Do NOT run blindly.</span> Replace placeholders with official values.
            </p>
            <div class="bg-slate-900 rounded-xl p-4 overflow-x-auto shadow-inner border-l-4 border-yellow-500">
                <div class="flex justify-between items-center mb-2 text-slate-400 text-xs font-mono">
                    <span>docker-compose.template.yml</span>
                    <span class="bg-slate-800 px-2 py-1 rounded text-yellow-500">TEMPLATE</span>
                </div>
                <pre class="text-slate-300 text-sm font-mono leading-relaxed">
version: '3'
services:
  {tool.slug.replace(/-/g, '_')}:
    image: <span class="text-yellow-400">&lt;OFFICIAL_IMAGE_NAME&gt;</span>:latest
    container_name: {tool.slug}
    ports:
      - "8080:<span class="text-yellow-400">&lt;APP_INTERNAL_PORT&gt;</span>"
    volumes:
      - ./data:/app/data
    restart: unless-stopped</pre>
            </div>
          </section>
      )}

      {/* API Fetch ‰ª£Á†ÅÊ®°Âùó */}
      {tool.collection === 'publicapis' && (
          <section>
            <h2 class="text-2xl font-bold mb-4 text-slate-800 border-b pb-2">Example Integration (JavaScript)</h2>
            <div class="bg-slate-900 rounded-xl p-4 overflow-x-auto shadow-inner">
                <div class="flex justify-between items-center mb-2 text-slate-400 text-xs font-mono">
                    <span>script.js</span>
                    <span class="bg-slate-800 px-2 py-1 rounded">JS</span>
                </div>
                <pre class="text-blue-400 text-sm font-mono leading-relaxed">
fetch('{tool.website_url}')
  .then(res => res.json())
  .then(data => console.log(data))
  .catch(err => console.error(err));</pre>
            </div>
          </section>
      )}

      {tool.key_features && (
          <section>
            <h2 class="text-2xl font-bold mb-4 text-slate-800 border-b pb-2">Key Features</h2>
            <ul class="grid sm:grid-cols-2 gap-x-4 gap-y-3">
              {tool.key_features.map((feature) => (
                <li class="flex items-start gap-2.5 text-slate-700">
                  <svg class="w-5 h-5 text-green-500 mt-1 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                  <span>{feature}</span>
                </li>
              ))}
            </ul>
          </section>
      )}

      {tool.faqs && tool.faqs.length > 0 && (
          <section>
            <h2 class="text-2xl font-bold mb-6 text-slate-800 border-b pb-2">Frequently Asked Questions</h2>
            <div class="space-y-4">
                {tool.faqs.map((faq) => (
                    <div class="bg-slate-50 border border-slate-200 rounded-xl p-6 transition hover:shadow-sm">
                        <h3 class="text-lg font-bold text-slate-900 mb-2 flex items-start gap-3">
                            <span class="bg-blue-100 text-blue-600 rounded-full w-6 h-6 flex items-center justify-center text-xs shrink-0 mt-0.5 font-bold">?</span>
                            {faq.question}
                        </h3>
                        <p class="text-slate-600 leading-relaxed ml-9">{faq.answer}</p>
                    </div>
                ))}
            </div>
          </section>
      )}

      <section>
        <h2 class="text-2xl font-bold mb-4 text-slate-800 border-b pb-2">Top Alternatives</h2>
        <div class="grid gap-3">
            {tool.alternatives && tool.alternatives.map((alt) => {
                const altSlug = alt.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');
                const exists = existingSlugs.has(altSlug);
                return (
                    <div class="flex items-center justify-between p-4 bg-white border border-slate-100 rounded-xl shadow-sm hover:border-blue-200 transition">
                        <span class="font-semibold text-slate-800">{alt}</span>
                        {exists ? (
                            <a href={`/tool/${altSlug}`} class="text-sm font-bold text-blue-600 hover:underline flex items-center gap-1">
                                Compare <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                            </a>
                        ) : (
                            <a href={`https://www.google.com/search?q=${encodeURIComponent(alt + ' ' + tool.name + ' alternative')}`} target="_blank" rel="nofollow noopener" class="text-xs text-slate-400 hover:text-slate-600 flex items-center gap-1">
                                Search Google <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                            </a>
                        )}
                    </div>
                );
            })}
        </div>
      </section>

      {/* üöÄ Â∫ïÈÉ®ÂÖ≥ÈîÆËØçË£ÇÂèòÊ®°Âùó (Êñ∞Â¢û) */}
      <section class="mt-12 pt-8 border-t border-slate-200">
        <h3 class="text-lg font-bold text-slate-900 mb-4">People Also Ask about {tool.name}</h3>
        <div class="flex flex-wrap gap-2">
            {tool.alternatives && tool.alternatives.slice(0, 5).map(alt => (
                <span class="px-3 py-1.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">{tool.name} vs {alt}</span>
            ))}
            <span class="px-3 py-1.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">{tool.name} {currentYear} review</span>
            {tool.collection === 'mac' && <span class="px-3 py-1.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">{tool.name} for Apple Silicon</span>}
            {tool.collection === 'windows' && <span class="px-3 py-1.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">{tool.name} portable version</span>}
            {tool.collection === 'selfhosted' && <span class="px-3 py-1.5 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">{tool.name} docker-compose example</span>}
        </div>
      </section>
    </div>

    <div class="space-y-8">
      <div class="bg-slate-50 p-6 rounded-xl border border-slate-200 sticky top-24">
        <h3 class="font-bold text-slate-900 mb-4">Tool Info</h3>
        <div class="space-y-4 text-sm">
            <div class="flex justify-between border-b border-slate-200 pb-2">
                <span class="text-slate-500">Pricing</span>
                <span class="font-medium text-slate-900">{tool.pricing_type}</span>
            </div>
            {tool.category && (
                <div class="flex justify-between border-b border-slate-200 pb-2">
                    <span class="text-slate-500">Category</span>
                    <a href={`/category/${tool.category.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '')}`} class="font-medium text-blue-600 hover:underline">{tool.category}</a>
                </div>
            )}
            <div class="flex justify-between border-b border-slate-200 pb-2">
                <span class="text-slate-500">Platform</span>
                <span class="font-medium text-slate-900 capitalize">{tool.collection === 'publicapis' ? 'Public API' : (tool.collection === 'ai' ? 'AI' : (tool.collection === 'mac' ? 'Mac' : (tool.collection === 'windows' ? 'Windows' : 'Self-Hosted')))}</span>
            </div>
        </div>

        <div class="mt-8 space-y-4">
            {tool.pros && tool.pros.length > 0 && (
                <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                    <h4 class="font-bold text-green-800 mb-2 flex items-center gap-2 text-xs uppercase tracking-wide">Pros</h4>
                    <ul class="space-y-2 text-sm text-green-900">
                        {tool.pros.map(pro => <li class="flex gap-2"><span class="font-bold">‚äï</span> {pro}</li>)}
                    </ul>
                </div>
            )}
            {tool.cons && tool.cons.length > 0 && (
                <div class="bg-red-50 p-4 rounded-lg border border-red-100">
                    <h4 class="font-bold text-red-800 mb-2 flex items-center gap-2 text-xs uppercase tracking-wide">Cons</h4>
                    <ul class="space-y-2 text-sm text-red-900">
                        {tool.cons.map(con => <li class="flex gap-2"><span class="font-bold">‚äñ</span> {con}</li>)}
                    </ul>
                </div>
            )}
        </div>
      </div>
    </div>
  </div>

  {relatedTools.length > 0 && (
      <section class="mt-16 pt-10 border-t border-slate-200">
        <h2 class="text-2xl font-bold mb-6">More {tool.category} Tools</h2>
        <div class="grid md:grid-cols-3 gap-6">
            {relatedTools.map(t => (
                <a href={`/tool/${t.slug || t.name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '')}`} class="block p-5 rounded-xl border border-slate-200 hover:border-blue-300 hover:shadow-md transition bg-white group">
                    <h3 class="font-bold text-slate-900 mb-1 group-hover:text-blue-600">{t.name}</h3>
                    <p class="text-xs text-slate-500 line-clamp-2">{t.tagline}</p>
                </a>
            ))}
        </div>
      </section>
  )}
</Layout>